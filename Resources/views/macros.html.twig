{#
    Renders datagrid widget

    parameters:
        name: datagrid name
        params: additional parameters for url
#}
{% macro renderGrid(name, params = {}) %}
    {% set dataUrl = path('oro_datagrid_index', { 'gridName': name }|merge(params)) %}

    {% set metaData = oro_grid_metadata(name) %}
    {% set options = metaData.options is defined ? metaData.options : [] %}
    {% set options = options|merge({ gridName: name, dataUrl: dataUrl }) %}
    {% set metaData = metaData|merge({'options': options}) %}

    <div data-type="datagrid" data-data="{{ render(dataUrl)|escape }}" data-metadata="{{ metaData|json_encode }}"></div>
    <script type="text/javascript">
        require(['jquery'], function ($) {
            $(function () {
                var datagrid = $('div[data-type="datagrid"]');
                console.group('Datagrid "{{ name }}" rendered:');
                console.info(datagrid.data('data'));
                console.info(datagrid.data('metadata'));
                console.groupEnd();

                datagrid.html(JSON.stringify(datagrid.data('data'))).append($('<hr />'));
                datagrid.append($('<div>').html(JSON.stringify(datagrid.data('metadata'))));
                {# @TODO add require JS builder here and call init method #}
            });
        });
    </script>
{% endmacro %}
